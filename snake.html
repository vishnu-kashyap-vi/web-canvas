<!DOCTYPE html>
<html>
<head>
  <title>Snake & Ladder | V Ã— S</title>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="snake-board.png">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* ===== BOARD (uses your image) ===== */
    .board {
      display: grid;
      grid-template-columns: repeat(10, 50px);
      grid-template-rows: repeat(10, 50px);
      width: 500px;
      height: 500px;
      border: 4px solid #2563eb;

      background-image: url("snake-board.png"); /* <-- your image */
      background-size: cover;
      background-position: center;
    }

    /* Cells are invisible but used for logic/positions */
    .cell {
      width: 50px;
      height: 50px;
      font-size: 0;          /* hide text */
      color: transparent;
      border: 1px solid transparent;
      position: relative;
    }

    /* ===== PLAYER DOTS ===== */
    .dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      position: absolute;
      top: 4px;
    }

    .dot.p1 {
      left: 4px;
      background: #ef4444;   /* red */
      box-shadow: 0 0 10px rgba(239,68,68,0.9);
    }
    .dot.p2 {
      right: 4px;
      background: #3b82f6;   /* blue */
      box-shadow: 0 0 10px rgba(59,130,246,0.9);
    }
    .dot.p3 {
      left: 4px;
      bottom: 4px;
      background: #22c55e;   /* green */
      box-shadow: 0 0 10px rgba(34,197,94,0.9);
    }
    .dot.p4 {
      right: 4px;
      bottom: 4px;
      background: #eab308;   /* yellow */
      box-shadow: 0 0 10px rgba(234,179,8,0.9);
    }

    /* ===== DICE STYLING + ANIMATION ===== */
    #diceValue {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 0.75rem;
      border: 2px solid #eab308;
      background: #020617;
      color: #facc15;
      font-size: 1.4rem;
      font-family: monospace;
      box-shadow: 0 0 15px rgba(234,179,8,0.6);
    }

    #diceValue.animate {
      animation: shake 0.4s linear infinite;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      50% { transform: translateX(3px); }
      75% { transform: translateX(-3px); }
      100% { transform: translateX(0); }
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-b from-black via-slate-900 to-black text-white">
  <div class="max-w-6xl mx-auto px-4 py-8 flex flex-col lg:flex-row gap-8">

    <!-- LEFT: BOARD -->
    <div class="flex flex-col items-center gap-3">
      <a href="games.html" class="self-start text-sm text-slate-300 hover:text-purple-300">
        &larr; Back to Games
      </a>

      <h1 class="text-3xl font-extrabold text-purple-400 drop-shadow-md text-center">
        Snake &amp; Ladder
      </h1>

      <p class="text-xs text-slate-300 text-center max-w-xs">
        2â€“4 players on one device. Red / Blue / Green / Yellow pawns. Animated dice & movement.
      </p>

      <div id="board" class="board"></div>
    </div>

    <!-- RIGHT: CONTROLS -->
    <div class="flex-1 flex flex-col gap-4">

      <!-- Setup -->
      <div class="bg-white/5 border border-white/10 rounded-2xl p-4 backdrop-blur flex flex-col gap-3">
        <p class="font-semibold text-slate-100 text-sm">Setup</p>

        <div class="flex flex-wrap items-center gap-3 text-xs text-slate-200">
          <span>Number of players:</span>
          <select id="playerCount" class="bg-black/40 border border-slate-600 rounded px-2 py-1">
            <option value="2">2 players</option>
            <option value="3">3 players</option>
            <option value="4">4 players</option>
          </select>
        </div>

        <div class="grid grid-cols-2 gap-2 text-xs text-slate-200">
          <label>
            Player 1 (Red):
            <input id="p1Name" class="mt-1 w-full bg-black/40 border border-red-400/60 rounded px-2 py-1"
                   placeholder="Player 1">
          </label>
          <label>
            Player 2 (Blue):
            <input id="p2Name" class="mt-1 w-full bg-black/40 border border-blue-400/60 rounded px-2 py-1"
                   placeholder="Player 2">
          </label>
          <label>
            Player 3 (Green):
            <input id="p3Name" class="mt-1 w-full bg-black/40 border border-emerald-400/60 rounded px-2 py-1"
                   placeholder="(optional)">
          </label>
          <label>
            Player 4 (Yellow):
            <input id="p4Name" class="mt-1 w-full bg-black/40 border border-yellow-400/60 rounded px-2 py-1"
                   placeholder="(optional)">
          </label>
        </div>

        <button id="startBtn"
                class="mt-2 px-4 py-2 rounded-full bg-cyan-500 hover:bg-cyan-400 text-xs font-semibold
                       shadow-[0_0_15px_rgba(34,211,238,0.8)] w-fit">
          âœ… Start game
        </button>

        <p id="setupInfo" class="text-[11px] text-slate-300 min-h-[1.3rem]"></p>
      </div>

      <!-- Game info -->
      <div class="bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur flex flex-col gap-3">
        <p id="turnText" class="font-semibold text-purple-300 text-sm">
          Click "Start game" to begin
        </p>

        <div id="playerList" class="grid grid-cols-2 gap-3 text-xs">
          <!-- JS fills this -->
        </div>

        <div class="flex items-center gap-3">
          <span>Dice:</span>
          <span id="diceValue">-</span>
        </div>

        <div class="flex gap-3 items-center mt-2">
          <button id="rollBtn"
                  class="px-5 py-2 rounded-full bg-purple-500 hover:bg-purple-400 text-white font-semibold
                         shadow-[0_0_20px_rgba(168,85,247,0.9)] transition disabled:opacity-40 disabled:cursor-not-allowed"
                  disabled>
            ðŸŽ² Roll Dice
          </button>
          <button id="resetBtn"
                  class="text-xs text-slate-300 hover:text-slate-100 underline">
            Reset positions
          </button>
        </div>

        <p id="message" class="text-xs text-slate-200 min-h-[1.5rem]"></p>
      </div>

      <!-- Info -->
      <div class="bg-white/5 border border-white/10 rounded-2xl p-4 text-xs text-slate-300">
        <p class="font-semibold mb-1 text-sky-300">How it works</p>
        <p>Land on the bottom of a ladder â†’ climb up.</p>
        <p>Land on the head of a snake â†’ slide down to its tail.</p>
      </div>

    </div>
  </div>

  <script>
    /* ===== 1. BOARD + SNAKE / LADDER DATA ===== */

    const boardElement = document.getElementById("board");
    const cells = {}; // cells[1]..cells[100]

    // Ladders: bottom -> top   (you can change to match your picture exactly)
    const ladders = {
      4: 14,
      9: 31,
      17: 74,
      21: 42,
      28: 84,
      51: 67,
      72: 91,
      80: 99
    };

    // Snakes: head -> tail
    const snakes = {
      98: 79,
      95: 75,
      93: 73,
      87: 24,
      64: 60,
      62: 19,
      54: 34,
      17: 7
    };

    // Build board: 1â€“10 bottom row, then 11â€“20 above, etc.
    function buildBoard() {
      boardElement.innerHTML = "";
      for (let row = 9; row >= 0; row--) {   // from bottom row (0) up to 9
        for (let col = 0; col < 10; col++) {
          const num = row * 10 + col + 1;   // 1..100
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.dataset.num = num;
          boardElement.appendChild(cell);
          cells[num] = cell;
        }
      }
    }

    buildBoard();

    /* ===== 2. GAME STATE ===== */

    let players = [];           // { name, pos, color }
    let currentPlayerIndex = 0;
    let gameOver = false;
    let isAnimating = false;

    /* ===== 3. DOM ELEMENTS ===== */

    const playerCountSel = document.getElementById("playerCount");
    const p1NameInput    = document.getElementById("p1Name");
    const p2NameInput    = document.getElementById("p2Name");
    const p3NameInput    = document.getElementById("p3Name");
    const p4NameInput    = document.getElementById("p4Name");
    const startBtn       = document.getElementById("startBtn");
    const setupInfoEl    = document.getElementById("setupInfo");

    const turnTextEl   = document.getElementById("turnText");
    const diceEl       = document.getElementById("diceValue");
    const playerListEl = document.getElementById("playerList");
    const rollBtn      = document.getElementById("rollBtn");
    const resetBtn     = document.getElementById("resetBtn");
    const messageEl    = document.getElementById("message");

    /* ===== 4. RENDER PLAYER LIST ===== */

    function renderPlayerList() {
      playerListEl.innerHTML = "";
      players.forEach(p => {
        const div = document.createElement("div");
        div.className = "bg-black/40 border border-white/10 rounded-lg p-2";

        const colorName =
          p.color === "p1" ? "Red" :
          p.color === "p2" ? "Blue" :
          p.color === "p3" ? "Green" : "Yellow";

        const colorClass =
          p.color === "p1" ? "bg-red-400" :
          p.color === "p2" ? "bg-blue-400" :
          p.color === "p3" ? "bg-emerald-400" : "bg-yellow-300";

        div.innerHTML = `
          <p class="font-semibold text-xs">
            <span class="inline-block w-2 h-2 rounded-full mr-1 ${colorClass}"></span>
            ${p.name} (${colorName})
          </p>
          <p class="text-[11px]">Position: ${p.pos}</p>
        `;
        playerListEl.appendChild(div);
      });
    }

    /* ===== 5. DRAW DOTS ON BOARD ===== */

    function updateBoardTokens() {
      document.querySelectorAll(".cell").forEach(c => {
        c.querySelectorAll(".dot").forEach(d => d.remove());
      });

      players.forEach(p => {
        const cell = cells[p.pos];
        if (!cell) return;
        const dot = document.createElement("div");
        dot.className = "dot " + p.color;
        cell.appendChild(dot);
      });

      renderPlayerList();
    }

    /* ===== 6. START GAME ===== */

    function startGame() {
      const count = Number(playerCountSel.value); // 2..4
      players = [];
      const colors = ["p1", "p2", "p3", "p4"];

      for (let i = 0; i < count; i++) {
        let name;
        if (i === 0)      name = p1NameInput.value.trim() || "Player 1";
        else if (i === 1) name = p2NameInput.value.trim() || "Player 2";
        else if (i === 2) name = p3NameInput.value.trim() || "Player 3";
        else              name = p4NameInput.value.trim() || "Player 4";

        players.push({
          name,
          pos: 1,
          color: colors[i]
        });
      }

      currentPlayerIndex = 0;
      gameOver = false;
      isAnimating = false;
      diceEl.textContent = "-";
      messageEl.textContent = "";
      rollBtn.disabled = false;

      setupInfoEl.textContent = `Game started with ${players.length} players.`;
      updateBoardTokens();
      updateTurnText();
    }

    startBtn.addEventListener("click", startGame);

    function updateTurnText() {
      if (!players.length) {
        turnTextEl.textContent = 'Click "Start game" to begin.';
        return;
      }
      const p = players[currentPlayerIndex];
      turnTextEl.textContent = `${p.name}'s turn`;
    }

    /* ===== 7. DICE ANIMATION ===== */

    function animateDice(finalValue, callback) {
      diceEl.classList.add("animate");
      let count = 0;
      const interval = setInterval(() => {
        diceEl.textContent = Math.floor(Math.random() * 6) + 1;
        count++;
        if (count >= 8) {
          clearInterval(interval);
          diceEl.classList.remove("animate");
          diceEl.textContent = finalValue;
          callback();
        }
      }, 80);
    }

    /* ===== 8. MOVE ANIMATION ===== */

    function movePlayerAnimated(player, diceValue) {
      const startPos = player.pos;
      let target = startPos + diceValue;

      if (target > 100) {
        messageEl.textContent = `${player.name} rolled too high and stays on ${player.pos}.`;
        isAnimating = false;
        nextTurn();
        return;
      }

      // Check ladder / snake after reaching target
      let viaType = null;
      let viaFrom = null;
      let finalPos = target;

      if (ladders[finalPos]) {
        viaType = "ladder";
        viaFrom = finalPos;
        finalPos = ladders[finalPos];
      } else if (snakes[finalPos]) {
        viaType = "snake";
        viaFrom = finalPos;
        finalPos = snakes[finalPos];
      }

      const steps = [];

      // move to dice target
      for (let p = startPos + 1; p <= target; p++) {
        steps.push(p);
      }

      // then climb up or slide down
      if (viaType === "ladder") {
        for (let p = target + 1; p <= finalPos; p++) steps.push(p);
      } else if (viaType === "snake") {
        for (let p = target - 1; p >= finalPos; p--) steps.push(p);
      }

      let idx = 0;

      function stepOnce() {
        if (idx >= steps.length) {
          let msg = `${player.name} moved to ${target}. `;
          if (viaType === "ladder") {
            msg += `ðŸªœ Climbed ladder to ${finalPos}. `;
          } else if (viaType === "snake") {
            msg += `ðŸ Bitten! Slid down to ${finalPos}. `;
          }

          player.pos = finalPos;
          updateBoardTokens();

          if (finalPos === 100) {
            msg += `ðŸ† ${player.name} wins!`;
            messageEl.textContent = msg;
            gameOver = true;
            rollBtn.disabled = true;
            isAnimating = false;
            return;
          }

          messageEl.textContent = msg;
          isAnimating = false;
          nextTurn();
          return;
        }

        player.pos = steps[idx];
        updateBoardTokens();
        idx++;
        setTimeout(stepOnce, 160); // speed of animation (ms)
      }

      stepOnce();
    }

    /* ===== 9. ROLL LOGIC ===== */

    function rollForCurrentPlayer() {
      if (gameOver || !players.length || isAnimating) return;

      const player = players[currentPlayerIndex];
      const dice = Math.floor(Math.random() * 6) + 1;

      isAnimating = true;
      animateDice(dice, () => {
        movePlayerAnimated(player, dice);
      });
    }

    function nextTurn() {
      currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      updateTurnText();
    }

    rollBtn.addEventListener("click", rollForCurrentPlayer);

    /* ===== 10. RESET ===== */

    function resetGame() {
      players.forEach(p => p.pos = 1);
      currentPlayerIndex = 0;
      gameOver = false;
      isAnimating = false;
      diceEl.textContent = "-";
      messageEl.textContent = "";
      rollBtn.disabled = players.length === 0;
      updateBoardTokens();
      updateTurnText();
    }

    resetBtn.addEventListener("click", resetGame);
  </script>
</body>
</html>
